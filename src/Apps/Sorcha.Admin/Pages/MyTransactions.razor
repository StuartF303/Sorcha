@page "/my-transactions"
@rendermode InteractiveWebAssembly
@attribute [Authorize]
@attribute [Authorize(Roles = "Consumer,User,Designer,Administrator")]

<PageTitle>My Transactions - Sorcha Platform</PageTitle>

<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-4">
    <MudText Typo="Typo.h4" Class="mb-2">
        <MudIcon Icon="@Icons.Material.Filled.Receipt" Class="mr-2" />
        My Transactions
    </MudText>
    <MudText Typo="Typo.body1" Color="Color.Secondary" Class="mb-4">
        View your transaction history on the distributed ledger
    </MudText>

    <MudGrid>
        <MudItem xs="12">
            <MudPaper Class="pa-4" Elevation="2">
                <MudText Typo="Typo.h6" Class="mb-3">Recent Transactions</MudText>

                <MudTable Items="@transactions" Hover="true" Striped="true" Dense="true">
                    <HeaderContent>
                        <MudTh>Transaction ID</MudTh>
                        <MudTh>Type</MudTh>
                        <MudTh>Workflow</MudTh>
                        <MudTh>Timestamp</MudTh>
                        <MudTh>Status</MudTh>
                        <MudTh>Actions</MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd>
                            <MudText Typo="Typo.body2" Style="font-family: monospace;">@context.Id</MudText>
                        </MudTd>
                        <MudTd>@context.Type</MudTd>
                        <MudTd>@context.Workflow</MudTd>
                        <MudTd>@context.Timestamp.ToString("MMM dd, yyyy HH:mm")</MudTd>
                        <MudTd>
                            <MudChip T="string" Size="Size.Small" Color="@context.StatusColor">@context.Status</MudChip>
                        </MudTd>
                        <MudTd>
                            <MudIconButton Icon="@Icons.Material.Filled.Visibility" Size="Size.Small" Color="Color.Primary" Title="View Details" />
                            <MudIconButton Icon="@Icons.Material.Filled.ContentCopy" Size="Size.Small" Color="Color.Default" Title="Copy ID" />
                        </MudTd>
                    </RowTemplate>
                </MudTable>
            </MudPaper>
        </MudItem>

        <MudItem xs="12">
            <MudAlert Severity="Severity.Info" Class="mt-4">
                <MudText Typo="Typo.body2">
                    This is a placeholder page. Full transaction viewing and verification will be implemented in future versions.
                </MudText>
            </MudAlert>
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    private List<TransactionItem> transactions = new()
    {
        new TransactionItem { Id = "0xabc123...", Type = "Action Executed", Workflow = "Loan Application #1234", Timestamp = DateTime.Now.AddHours(-2), Status = "Confirmed", StatusColor = Color.Success },
        new TransactionItem { Id = "0xdef456...", Type = "Data Submitted", Workflow = "Document Approval #9012", Timestamp = DateTime.Now.AddHours(-5), Status = "Confirmed", StatusColor = Color.Success },
        new TransactionItem { Id = "0xghi789...", Type = "Workflow Started", Workflow = "Supply Chain #5678", Timestamp = DateTime.Now.AddDays(-1), Status = "Confirmed", StatusColor = Color.Success },
        new TransactionItem { Id = "0xjkl012...", Type = "Action Executed", Workflow = "Loan Application #1133", Timestamp = DateTime.Now.AddDays(-3), Status = "Confirmed", StatusColor = Color.Success },
        new TransactionItem { Id = "0xmno345...", Type = "Workflow Completed", Workflow = "Supply Chain #4455", Timestamp = DateTime.Now.AddDays(-7), Status = "Confirmed", StatusColor = Color.Success },
    };

    public class TransactionItem
    {
        public string Id { get; set; } = "";
        public string Type { get; set; } = "";
        public string Workflow { get; set; } = "";
        public DateTime Timestamp { get; set; }
        public string Status { get; set; } = "";
        public Color StatusColor { get; set; }
    }
}
