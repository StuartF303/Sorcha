@page "/templates"
@rendermode InteractiveWebAssembly
@attribute [Authorize]
@attribute [Authorize(Roles = "Designer,Administrator")]

<PageTitle>Blueprint Templates - Sorcha Platform</PageTitle>

<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-4">
    <MudText Typo="Typo.h4" Class="mb-2">
        <MudIcon Icon="@Icons.Material.Filled.ContentCopy" Class="mr-2" />
        Blueprint Templates
    </MudText>
    <MudText Typo="Typo.body1" Color="Color.Secondary" Class="mb-4">
        Quick start templates for common workflows
    </MudText>

    <MudGrid>
        @foreach (var template in templates)
        {
            <MudItem xs="12" md="6" lg="4">
                <MudCard Elevation="2">
                    <MudCardHeader>
                        <CardHeaderContent>
                            <MudText Typo="Typo.h6">
                                <MudIcon Icon="@template.Icon" Class="mr-2" />
                                @template.Name
                            </MudText>
                        </CardHeaderContent>
                        <CardHeaderActions>
                            <MudChip T="string" Size="Size.Small" Color="@template.CategoryColor">@template.Category</MudChip>
                        </CardHeaderActions>
                    </MudCardHeader>
                    <MudCardContent>
                        <MudText Typo="Typo.body2" Class="mb-3">@template.Description</MudText>
                        <MudDivider Class="my-2" />
                        <MudText Typo="Typo.caption" Color="Color.Secondary">
                            <MudIcon Icon="@Icons.Material.Filled.People" Size="Size.Small" /> @template.ParticipantCount participants
                        </MudText>
                        <MudText Typo="Typo.caption" Color="Color.Secondary">
                            <MudIcon Icon="@Icons.Material.Filled.PlayArrow" Size="Size.Small" /> @template.ActionCount actions
                        </MudText>
                    </MudCardContent>
                    <MudCardActions>
                        <MudButton Href="/designer" Color="Color.Primary" Variant="Variant.Text" FullWidth="true">
                            Use Template
                        </MudButton>
                    </MudCardActions>
                </MudCard>
            </MudItem>
        }

        <MudItem xs="12">
            <MudAlert Severity="Severity.Info">
                <MudText Typo="Typo.body2">
                    This is a placeholder page. Template management and instantiation will be implemented in future versions.
                </MudText>
            </MudAlert>
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    private List<TemplateItem> templates = new()
    {
        new TemplateItem { Name = "Loan Application", Description = "Multi-party loan application process with applicant and bank", Category = "Financial", CategoryColor = Color.Success, Icon = Icons.Material.Filled.AttachMoney, ParticipantCount = 2, ActionCount = 3 },
        new TemplateItem { Name = "Supply Chain Verification", Description = "Track products through the supply chain with verification", Category = "Logistics", CategoryColor = Color.Info, Icon = Icons.Material.Filled.LocalShipping, ParticipantCount = 3, ActionCount = 4 },
        new TemplateItem { Name = "Document Approval", Description = "Multi-stage document review and approval workflow", Category = "Collaboration", CategoryColor = Color.Primary, Icon = Icons.Material.Filled.Description, ParticipantCount = 2, ActionCount = 3 },
        new TemplateItem { Name = "Purchase Order", Description = "Buyer and supplier purchase order processing", Category = "Financial", CategoryColor = Color.Success, Icon = Icons.Material.Filled.ShoppingCart, ParticipantCount = 2, ActionCount = 5 },
        new TemplateItem { Name = "Identity Verification", Description = "KYC identity verification workflow", Category = "Compliance", CategoryColor = Color.Warning, Icon = Icons.Material.Filled.VerifiedUser, ParticipantCount = 2, ActionCount = 2 },
        new TemplateItem { Name = "Contract Signing", Description = "Multi-party contract review and digital signing", Category = "Legal", CategoryColor = Color.Secondary, Icon = Icons.Material.Filled.Gavel, ParticipantCount = 3, ActionCount = 4 },
    };

    public class TemplateItem
    {
        public string Name { get; set; } = "";
        public string Description { get; set; } = "";
        public string Category { get; set; } = "";
        public Color CategoryColor { get; set; }
        public string Icon { get; set; } = "";
        public int ParticipantCount { get; set; }
        public int ActionCount { get; set; }
    }
}
