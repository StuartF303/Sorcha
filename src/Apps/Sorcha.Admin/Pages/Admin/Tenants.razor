@page "/admin/tenants"
@attribute [Authorize(Roles = "Administrator,SystemAdmin")]

<PageTitle>Tenant Management - Sorcha Platform</PageTitle>

<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-4">
    <MudText Typo="Typo.h4" Class="mb-2">
        <MudIcon Icon="@Icons.Material.Filled.Business" Class="mr-2" />
        Tenant Management
    </MudText>
    <MudText Typo="Typo.body1" Color="Color.Secondary" Class="mb-4">
        Manage organizations and tenant configurations
    </MudText>

    <MudGrid>
        <MudItem xs="12">
            <MudPaper Class="pa-4" Elevation="2">
                <div class="d-flex justify-space-between align-center mb-3">
                    <MudText Typo="Typo.h6">All Tenants</MudText>
                    <MudButton Color="Color.Primary" Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.Add">
                        Add Tenant
                    </MudButton>
                </div>

                <MudTable Items="@tenants" Hover="true" Striped="true">
                    <HeaderContent>
                        <MudTh>Organization</MudTh>
                        <MudTh>Tenant ID</MudTh>
                        <MudTh>Users</MudTh>
                        <MudTh>Blueprints</MudTh>
                        <MudTh>Status</MudTh>
                        <MudTh>Created</MudTh>
                        <MudTh>Actions</MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd>@context.Organization</MudTd>
                        <MudTd Style="font-family: monospace;">@context.TenantId</MudTd>
                        <MudTd>@context.UserCount</MudTd>
                        <MudTd>@context.BlueprintCount</MudTd>
                        <MudTd>
                            <MudChip T="string" Size="Size.Small" Color="@(context.IsActive ? Color.Success : Color.Default)">
                                @(context.IsActive ? "Active" : "Suspended")
                            </MudChip>
                        </MudTd>
                        <MudTd>@context.Created.ToString("MMM dd, yyyy")</MudTd>
                        <MudTd>
                            <MudIconButton Icon="@Icons.Material.Filled.Edit" Size="Size.Small" Color="Color.Primary" />
                            <MudIconButton Icon="@Icons.Material.Filled.Settings" Size="Size.Small" Color="Color.Default" />
                        </MudTd>
                    </RowTemplate>
                </MudTable>
            </MudPaper>
        </MudItem>

        <MudItem xs="12">
            <MudAlert Severity="Severity.Info">
                <MudText Typo="Typo.body2">
                    This is a placeholder page. Full tenant management will be implemented with Tenant Service integration in future versions.
                </MudText>
            </MudAlert>
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    private List<TenantItem> tenants = new()
    {
        new TenantItem { Organization = "ACME Corporation", TenantId = "acme-corp", UserCount = 15, BlueprintCount = 8, IsActive = true, Created = DateTime.Now.AddMonths(-6) },
        new TenantItem { Organization = "Tech Solutions Ltd", TenantId = "tech-sol", UserCount = 8, BlueprintCount = 12, IsActive = true, Created = DateTime.Now.AddMonths(-3) },
        new TenantItem { Organization = "Global Industries", TenantId = "global-ind", UserCount = 25, BlueprintCount = 15, IsActive = true, Created = DateTime.Now.AddMonths(-12) },
        new TenantItem { Organization = "StartUp Inc", TenantId = "startup-inc", UserCount = 4, BlueprintCount = 3, IsActive = false, Created = DateTime.Now.AddMonths(-1) },
    };

    public class TenantItem
    {
        public string Organization { get; set; } = "";
        public string TenantId { get; set; } = "";
        public int UserCount { get; set; }
        public int BlueprintCount { get; set; }
        public bool IsActive { get; set; }
        public DateTime Created { get; set; }
    }
}
