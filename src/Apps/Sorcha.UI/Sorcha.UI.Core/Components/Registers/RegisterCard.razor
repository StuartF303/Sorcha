@* SPDX-License-Identifier: MIT *@
@* Copyright (c) 2025 Sorcha Contributors *@

@using Sorcha.UI.Core.Models.Registers
@using Sorcha.UI.Core.Components.Shared

<MudPaper Elevation="2"
          Class="pa-4 register-card"
          Style="cursor: pointer"
          @onclick="OnCardClick"
          data-testid="register-card"
          data-register-id="@Register.Id">
    <MudStack Row="true" Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center">
        <MudStack Spacing="1">
            <MudText Typo="Typo.subtitle1" data-testid="register-name">
                <strong>@Register.Name</strong>
            </MudText>
            <span data-testid="register-id">
                <TruncatedId Value="@Register.Id" />
            </span>
        </MudStack>
        <RegisterStatusBadge Status="@Register.Status" />
    </MudStack>

    <MudDivider Class="my-2" />

    <MudGrid Spacing="2">
        <MudItem xs="6">
            <MudStack Spacing="0">
                <MudText Typo="Typo.caption" Color="Color.Secondary">Height</MudText>
                <MudText Typo="Typo.body2" data-testid="register-height">
                    <MudIcon Icon="@Icons.Material.Filled.Layers" Size="Size.Small" Class="mr-1" />
                    @Register.HeightFormatted
                </MudText>
            </MudStack>
        </MudItem>
        <MudItem xs="6">
            <MudStack Spacing="0">
                <MudText Typo="Typo.caption" Color="Color.Secondary">Last Update</MudText>
                <MudText Typo="Typo.body2" data-testid="register-updated">
                    <MudIcon Icon="@Icons.Material.Filled.Schedule" Size="Size.Small" Class="mr-1" />
                    @Register.LastUpdateFormatted
                </MudText>
            </MudStack>
        </MudItem>
    </MudGrid>

    @if (Register.Advertise)
    {
        <MudChip T="string"
                 Color="Color.Info"
                 Size="Size.Small"
                 Icon="@Icons.Material.Filled.Public"
                 Class="mt-2">
            Public
        </MudChip>
    }
</MudPaper>

@code {
    /// <summary>
    /// The register to display
    /// </summary>
    [Parameter]
    public required RegisterViewModel Register { get; set; }

    /// <summary>
    /// Callback when the card is clicked
    /// </summary>
    [Parameter]
    public EventCallback<RegisterViewModel> OnClick { get; set; }

    private async Task OnCardClick()
    {
        await OnClick.InvokeAsync(Register);
    }
}

<style>
    .register-card {
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }

    .register-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }
</style>
